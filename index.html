<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üõ°Ô∏è Mission Blackout - Escape Game Cybers√©curit√©</title>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&family=Outfit:wght@400;500;700;800&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.5/babel.min.js"></script>
    <script>
        // Masquer l'avertissement Babel dans la console
        (function() {
            const originalWarn = console.warn;
            console.warn = function(...args) {
                if (args[0] && typeof args[0] === 'string' && args[0].includes('in-browser Babel transformer')) {
                    return; // Ignorer cet avertissement sp√©cifique
                }
                originalWarn.apply(console, args);
            };
        })();
    </script>
    <style>
        :root {
            --bg-dark: #0c0c0f;
            --bg-panel: #16161a;
            --bg-card: #1e1e24;
            --accent-red: #ff4757;
            --accent-green: #2ed573;
            --accent-blue: #5352ed;
            --accent-amber: #ffa502;
            --accent-purple: #a855f7;
            --accent-cyan: #00d2d3;
            --text-primary: #f1f1f1;
            --text-muted: #8b8b8b;
            --border: #2a2a30;
        }
        
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: 'Outfit', sans-serif;
            background: var(--bg-dark);
            color: var(--text-primary);
            min-height: 100vh;
            line-height: 1.6;
        }
        
        .container { max-width: 900px; margin: 0 auto; padding: 20px; }
        
        /* Animations */
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.6; } }
        @keyframes glow { 0%, 100% { box-shadow: 0 0 20px rgba(255, 71, 87, 0.3); } 50% { box-shadow: 0 0 40px rgba(255, 71, 87, 0.6); } }
        
        .fade-in { animation: fadeIn 0.4s ease-out; }
        .pulse { animation: pulse 2s infinite; }
        .glow { animation: glow 2s infinite; }
        
        /* Typography */
        h1 { font-size: 2.5rem; font-weight: 800; letter-spacing: -0.02em; }
        h2 { font-size: 1.5rem; font-weight: 700; }
        h3 { font-size: 1.1rem; font-weight: 600; }
        code { font-family: 'JetBrains Mono', monospace; background: rgba(255,255,255,0.1); padding: 2px 6px; border-radius: 4px; font-size: 0.85em; }
        
        /* Cards & Panels */
        .card {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 24px;
            margin-bottom: 16px;
        }
        
        .card-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 16px;
            padding-bottom: 12px;
            border-bottom: 1px solid var(--border);
        }
        
        /* Buttons */
        .btn {
            padding: 14px 28px;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            border: none;
            transition: all 0.2s;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }
        
        .btn-primary { background: linear-gradient(135deg, var(--accent-blue), var(--accent-purple)); color: white; }
        .btn-primary:hover { transform: translateY(-2px); box-shadow: 0 8px 20px rgba(83, 82, 237, 0.4); }
        .btn-danger { background: var(--accent-red); color: white; }
        .btn-success { background: var(--accent-green); color: white; }
        .btn-outline { background: transparent; border: 2px solid var(--border); color: var(--text-primary); }
        .btn-outline:hover { border-color: var(--accent-blue); background: rgba(83, 82, 237, 0.1); }
        .btn:disabled { opacity: 0.5; cursor: not-allowed; }
        
        /* Resource Link - Style distinctif pour les liens p√©dagogiques */
        .resource-link {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 14px 18px;
            background: linear-gradient(135deg, rgba(0, 210, 211, 0.1), rgba(168, 85, 247, 0.1));
            border: 1px solid var(--accent-cyan);
            border-radius: 10px;
            color: var(--accent-cyan);
            text-decoration: none;
            font-weight: 500;
            transition: all 0.2s;
            margin: 12px 0;
        }
        
        .resource-link:hover {
            background: linear-gradient(135deg, rgba(0, 210, 211, 0.2), rgba(168, 85, 247, 0.2));
            transform: translateX(4px);
        }
        
        .resource-link .icon { font-size: 1.4rem; }
        .resource-link .label { flex: 1; }
        .resource-link .arrow { opacity: 0.6; }
        
        /* Alert boxes */
        .alert {
            padding: 16px 20px;
            border-radius: 8px;
            border-left: 4px solid;
            margin: 16px 0;
        }
        .alert-danger { background: rgba(255, 71, 87, 0.1); border-color: var(--accent-red); }
        .alert-success { background: rgba(46, 213, 115, 0.1); border-color: var(--accent-green); }
        .alert-warning { background: rgba(255, 165, 2, 0.1); border-color: var(--accent-amber); }
        .alert-info { background: rgba(83, 82, 237, 0.1); border-color: var(--accent-blue); }
        
        /* Terminal */
        .terminal {
            background: #0d0d0d;
            border: 1px solid var(--border);
            border-radius: 8px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.85rem;
            overflow: hidden;
        }
        .terminal-header {
            background: #1a1a1a;
            padding: 10px 14px;
            display: flex;
            gap: 6px;
            border-bottom: 1px solid var(--border);
        }
        .terminal-dot { width: 12px; height: 12px; border-radius: 50%; }
        .terminal-content { padding: 16px; max-height: 300px; overflow-y: auto; }
        .terminal-line { margin-bottom: 6px; }
        .t-green { color: var(--accent-green); }
        .t-red { color: var(--accent-red); }
        .t-amber { color: var(--accent-amber); }
        .t-muted { color: var(--text-muted); }
        
        /* Progress */
        .progress-bar {
            position: fixed;
            top: 0; left: 0; right: 0;
            height: 4px;
            background: var(--bg-panel);
            z-index: 100;
        }
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--accent-blue), var(--accent-purple), var(--accent-cyan));
            transition: width 0.3s;
        }
        
        /* Status bar */
        .status-bar {
            position: fixed;
            top: 4px; left: 0; right: 0;
            height: 48px;
            background: rgba(22, 22, 26, 0.95);
            backdrop-filter: blur(8px);
            border-bottom: 1px solid var(--border);
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 20px;
            z-index: 99;
            font-size: 0.9rem;
        }
        
        /* Choices */
        .choice {
            background: var(--bg-card);
            border: 2px solid var(--border);
            border-radius: 10px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.2s;
            text-align: left;
        }
        .choice:hover { border-color: var(--accent-blue); transform: translateY(-2px); }
        .choice.selected { border-color: var(--accent-green); background: rgba(46, 213, 115, 0.1); }
        .choice.wrong { border-color: var(--accent-red); background: rgba(255, 71, 87, 0.1); }
        
        /* Grid */
        .grid-2 { display: grid; grid-template-columns: repeat(2, 1fr); gap: 16px; }
        .grid-3 { display: grid; grid-template-columns: repeat(3, 1fr); gap: 16px; }
        @media (max-width: 768px) { .grid-2, .grid-3 { grid-template-columns: 1fr; } }
        
        /* Ransom screen */
        .ransom {
            background: linear-gradient(135deg, #1a0000, #0a0000);
            border: 3px solid var(--accent-red);
            padding: 40px;
            text-align: center;
            position: relative;
        }
        .ransom h2 { color: var(--accent-red); font-size: 1.8rem; text-shadow: 0 0 20px rgba(255, 71, 87, 0.5); }
        .countdown { font-family: 'JetBrains Mono', monospace; font-size: 3rem; color: var(--accent-red); }
        
        /* Code block */
        .code-block {
            background: #0d0d0d;
            border: 1px solid var(--border);
            border-radius: 8px;
            overflow: hidden;
        }
        .code-header {
            background: #1a1a1a;
            padding: 10px 16px;
            font-size: 0.85rem;
            color: var(--text-muted);
            border-bottom: 1px solid var(--border);
        }
        .code-content {
            padding: 16px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.8rem;
            overflow-x: auto;
            white-space: pre;
        }
        
        /* Main container offset for status bar */
        .main { padding-top: 70px; padding-bottom: 40px; }
        
        /* File list */
        .file-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 16px;
            border-bottom: 1px solid var(--border);
            cursor: pointer;
            transition: background 0.2s;
        }
        .file-item:hover { background: rgba(83, 82, 237, 0.1); }
        .file-item.active { background: rgba(83, 82, 237, 0.2); border-left: 3px solid var(--accent-blue); }
        .file-item.danger { background: rgba(255, 71, 87, 0.1); }
        
        /* Concept badge */
        .concept-badge {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            background: rgba(168, 85, 247, 0.2);
            border: 1px solid var(--accent-purple);
            color: var(--accent-purple);
            padding: 4px 10px;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
    </style>
</head>
<body>
    <div id="root"></div>
    
    <script type="text/babel">
        const { useState, useEffect } = React;

        // ==================== CONFIGURATION ====================
        // URL de base du dossier Google Drive partag√© avec les ressources p√©dagogiques
        // √Ä PERSONNALISER selon votre structure de dossier
        const DRIVE_BASE_URL = "https://drive.google.com/drive/folders/VOTRE_ID_DOSSIER";
        
        // Configuration des ressources p√©dagogiques externes
        const RESOURCES = {
            // Concepts fondamentaux
            injection_sql: {
                title: "Injection SQL - Fiche concept",
                icon: "üìÑ",
                description: "Comprendre et pr√©venir les injections SQL",
                url: DRIVE_BASE_URL + "?file=01_injection_sql.pdf"
            },
            hash_passwords: {
                title: "Hashage des mots de passe",
                icon: "üìÑ",
                description: "Bcrypt, Argon2 et bonnes pratiques",
                url: DRIVE_BASE_URL + "?file=02_hash_passwords.pdf"
            },
            gestion_secrets: {
                title: "Gestion des secrets",
                icon: "üìÑ",
                description: "Variables d'environnement, Vault, bonnes pratiques",
                url: DRIVE_BASE_URL + "?file=03_gestion_secrets.pdf"
            },
            ransomware: {
                title: "Ransomware - Comprendre la menace",
                icon: "üìÑ",
                description: "Fonctionnement, pr√©vention, r√©action",
                url: DRIVE_BASE_URL + "?file=04_ransomware.pdf"
            },
            segmentation_reseau: {
                title: "Segmentation r√©seau",
                icon: "üìÑ",
                description: "VLAN, Zero Trust, d√©fense en profondeur",
                url: DRIVE_BASE_URL + "?file=05_segmentation_reseau.pdf"
            },
            devsecops: {
                title: "DevSecOps - Pipeline s√©curis√©",
                icon: "üìÑ",
                description: "SAST, DAST, scan de d√©pendances",
                url: DRIVE_BASE_URL + "?file=06_devsecops.pdf"
            },
            reponse_incident: {
                title: "R√©ponse √† incident",
                icon: "üìÑ",
                description: "Proc√©dures, communication, reconstruction",
                url: DRIVE_BASE_URL + "?file=07_reponse_incident.pdf"
            },
            // Ressources externes officielles
            anssi_guide: {
                title: "Guide ANSSI - Hygi√®ne informatique",
                icon: "üèõÔ∏è",
                description: "42 mesures essentielles (cyber.gouv.fr)",
                url: "https://cyber.gouv.fr/publications/guide-dhygiene-informatique"
            },
            owasp_top10: {
                title: "OWASP Top 10",
                icon: "üåê",
                description: "Les 10 risques web les plus critiques",
                url: "https://owasp.org/www-project-top-ten/"
            }
        };

        // Donn√©es du sc√©nario (simplifi√©es)
        const SCENARIO = {
            company: { name: "LogiTrans", employees: 850, revenue: "180M‚Ç¨" },
            attack: { ransom: "450 000‚Ç¨", deadline: 72, dataStolen: "340 Go" }
        };

        // ==================== COMPOSANTS UTILITAIRES ====================
        
        // Lien vers une ressource p√©dagogique
        const ResourceLink = ({ resourceKey, compact = false }) => {
            const resource = RESOURCES[resourceKey];
            if (!resource) return null;
            
            return (
                <a 
                    href={resource.url} 
                    target="_blank" 
                    rel="noopener noreferrer"
                    className="resource-link"
                    style={compact ? { padding: '10px 14px', fontSize: '0.9rem' } : {}}
                >
                    <span className="icon">{resource.icon}</span>
                    <span className="label">
                        <strong>{resource.title}</strong>
                        {!compact && <div style={{ fontSize: '0.85rem', opacity: 0.8 }}>{resource.description}</div>}
                    </span>
                    <span className="arrow">‚Üí</span>
                </a>
            );
        };

        // Badge de concept
        const ConceptBadge = ({ children }) => (
            <span className="concept-badge">üìö {children}</span>
        );

        // Terminal
        const Terminal = ({ lines }) => (
            <div className="terminal">
                <div className="terminal-header">
                    <div className="terminal-dot" style={{ background: '#ff5f56' }}></div>
                    <div className="terminal-dot" style={{ background: '#ffbd2e' }}></div>
                    <div className="terminal-dot" style={{ background: '#27ca40' }}></div>
                </div>
                <div className="terminal-content">
                    {lines.map((line, i) => (
                        <div key={i} className={`terminal-line ${line.type ? `t-${line.type}` : 't-muted'}`}>
                            {line.text}
                        </div>
                    ))}
                </div>
            </div>
        );

        // Alert box
        const Alert = ({ type, title, children }) => (
            <div className={`alert alert-${type}`}>
                {title && <strong style={{ display: 'block', marginBottom: '8px' }}>{title}</strong>}
                {children}
            </div>
        );

        // Code block
        const CodeBlock = ({ title, code }) => (
            <div className="code-block">
                <div className="code-header">{title}</div>
                <div className="code-content">{code}</div>
            </div>
        );

        // Progress & Status
        const StatusBar = ({ playerName, phase, score }) => (
            <>
                <div className="progress-bar">
                    <div className="progress-fill" style={{ width: `${(phase / 7) * 100}%` }} />
                </div>
                <div className="status-bar">
                    <span>üë§ {playerName}</span>
                    <span style={{ color: 'var(--accent-blue)' }}>Phase {phase}/7</span>
                    <span>üéØ {score.correct}/{score.total}</span>
                </div>
            </>
        );

        // ==================== √âCRANS DU JEU ====================

        // √âcran d'accueil
        const StartScreen = ({ onStart, playerName, setPlayerName }) => (
            <div className="container" style={{ minHeight: '100vh', display: 'flex', flexDirection: 'column', justifyContent: 'center', alignItems: 'center', textAlign: 'center' }}>
                <div className="fade-in">
                    <div style={{ fontSize: '5rem', marginBottom: '20px' }}>üõ°Ô∏è</div>
                    <h1 style={{ 
                        background: 'linear-gradient(90deg, var(--accent-red), var(--accent-amber))',
                        WebkitBackgroundClip: 'text',
                        WebkitTextFillColor: 'transparent',
                        marginBottom: '12px'
                    }}>
                        MISSION BLACKOUT
                    </h1>
                    <p style={{ color: 'var(--text-muted)', fontSize: '1.1rem', marginBottom: '40px' }}>
                        Escape Game Cybers√©curit√© ‚Ä¢ BTS SIO SLAM
                    </p>
                    
                    <div className="card" style={{ maxWidth: '400px', textAlign: 'left' }}>
                        <h3 style={{ marginBottom: '16px' }}>üéÆ Commencer la mission</h3>
                        <input
                            type="text"
                            placeholder="Votre pr√©nom"
                            value={playerName}
                            onChange={(e) => setPlayerName(e.target.value)}
                            onKeyDown={(e) => e.key === 'Enter' && playerName.trim() && onStart()}
                            style={{
                                width: '100%',
                                padding: '14px',
                                background: 'var(--bg-dark)',
                                border: '2px solid var(--border)',
                                borderRadius: '8px',
                                color: 'var(--text-primary)',
                                fontSize: '1rem',
                                marginBottom: '16px'
                            }}
                        />
                        <button 
                            className="btn btn-primary" 
                            onClick={onStart}
                            disabled={!playerName.trim()}
                            style={{ width: '100%', justifyContent: 'center' }}
                        >
                            üöÄ D√©marrer
                        </button>
                    </div>
                    
                    <div style={{ marginTop: '30px', color: 'var(--text-muted)', fontSize: '0.9rem' }}>
                        <p>‚è±Ô∏è Dur√©e : 45-50 min ‚Ä¢ üìö Documents p√©dagogiques inclus</p>
                    </div>
                </div>
            </div>
        );

        // √âcran d'alerte initiale
        const AlertScreen = ({ onNext, playerName }) => {
            const [showBriefing, setShowBriefing] = useState(false);
            
            useEffect(() => {
                const timer = setTimeout(() => setShowBriefing(true), 2500);
                return () => clearTimeout(timer);
            }, []);

            return (
                <div className="container main">
                    <div style={{ textAlign: 'center', marginBottom: '24px' }}>
                        <p style={{ color: 'var(--text-muted)' }}>üìÖ Lundi 3 f√©vrier 2025 ‚Äî 06:47</p>
                        <h1 style={{ color: 'var(--accent-red)' }}>üö® ALERTE CRITIQUE</h1>
                    </div>

                    <div className="ransom glow fade-in" style={{ marginBottom: '24px' }}>
                        <h2 style={{ marginBottom: '16px' }}>‚ö†Ô∏è VOS FICHIERS ONT √âT√â CHIFFR√âS ‚ö†Ô∏è</h2>
                        <div className="countdown pulse">71:59:42</div>
                        <p style={{ marginTop: '16px', color: 'var(--accent-red)' }}>
                            Payez <strong>450 000‚Ç¨</strong> en Bitcoin sous 72h<br/>
                            ou vos donn√©es seront publi√©es.
                        </p>
                    </div>

                    {showBriefing && (
                        <div className="fade-in">
                            <Alert type="warning" title="üì± Message de votre manager">
                                <p>"{playerName}, j'ai besoin de toi MAINTENANT. Tous les serveurs sont down. On compte sur toi."</p>
                            </Alert>

                            <div className="card">
                                <h3 style={{ marginBottom: '16px' }}>üìã Situation</h3>
                                <ul style={{ listStyle: 'none', display: 'flex', flexDirection: 'column', gap: '8px' }}>
                                    <li>üè¢ <strong>LogiTrans</strong> ‚Äî 850 salari√©s, 180M‚Ç¨ CA</li>
                                    <li>üí∞ <strong>Ran√ßon</strong> ‚Äî 450 000‚Ç¨ en Bitcoin</li>
                                    <li>‚è∞ <strong>D√©lai</strong> ‚Äî 72h avant publication</li>
                                </ul>
                            </div>

                            <div className="card" style={{ borderColor: 'var(--accent-green)', background: 'rgba(46, 213, 115, 0.05)' }}>
                                <h3 style={{ marginBottom: '12px', color: 'var(--accent-green)' }}>üí™ Votre r√¥le : D√©veloppeur¬∑se SLAM</h3>
                                <p style={{ color: 'var(--text-muted)', marginBottom: '12px' }}>
                                    En tant que d√©veloppeur¬∑se, vous √™tes <strong>au c≈ìur de la solution</strong>. Vos comp√©tences sont essentielles pour :
                                </p>
                                <ul style={{ listStyle: 'none', display: 'flex', flexDirection: 'column', gap: '8px' }}>
                                    <li>üîç <strong>Investiguer</strong> ‚Äî Analyser les logs et comprendre l'attaque</li>
                                    <li>üõ°Ô∏è <strong>S√©curiser</strong> ‚Äî Corriger les failles dans le code</li>
                                    <li>üîß <strong>Reconstruire</strong> ‚Äî Cr√©er un syst√®me plus robuste</li>
                                    <li>üöÄ <strong>Innover</strong> ‚Äî Mettre en place un pipeline DevSecOps</li>
                                </ul>
                                <p style={{ marginTop: '12px', fontStyle: 'italic', color: 'var(--accent-green)' }}>
                                    "Le d√©veloppeur n'est pas le probl√®me, il est LA solution."
                                </p>
                            </div>

                            <div className="card" style={{ background: 'linear-gradient(135deg, rgba(0, 210, 211, 0.1), rgba(168, 85, 247, 0.05))' }}>
                                <ConceptBadge>Comprendre la menace</ConceptBadge>
                                <p style={{ margin: '12px 0', color: 'var(--text-muted)' }}>
                                    Avant de continuer, prenez 2 minutes pour comprendre ce qu'est un ransomware et comment il fonctionne.
                                </p>
                                <ResourceLink resourceKey="ransomware" />
                            </div>

                            <div style={{ textAlign: 'center', marginTop: '24px' }}>
                                <button className="btn btn-danger" onClick={onNext}>
                                    üèÉ Se rendre au bureau ‚Üí
                                </button>
                            </div>
                        </div>
                    )}
                </div>
            );
        };

        // √âcran d'investigation
        const InvestigationScreen = ({ onComplete, onAnswer }) => {
            const [selectedFile, setSelectedFile] = useState(null);
            const [foundClues, setFoundClues] = useState([]);
            const [answered, setAnswered] = useState(false);
            const [selectedAnswer, setSelectedAnswer] = useState(null);

            const files = {
                logs: {
                    name: "auth_logs_2025-02-03.log",
                    icon: "üìã",
                    content: [
                        { text: "[02:47:12] [INFO] Connexion r√©ussie - user: admin_backup - IP: 185.220.101.42 (TOR)", type: "amber" },
                        { text: "[02:47:14] [WARN] Requ√™te inhabituelle: SELECT * FROM clients LIMIT 999999", type: "amber" },
                        { text: "[02:48:01] [INFO] Export CSV - table: clients - 12847 lignes", type: "muted" },
                        { text: "[02:53:01] [CRITICAL] √âl√©vation privil√®ges: admin_backup ‚Üí root", type: "red" },
                        { text: "[03:15:22] [CRITICAL] Connexion DB perdue", type: "red" }
                    ],
                    analysis: "Le compte admin_backup a √©t√© utilis√© depuis TOR √† 02:47. Ce compte... vous le reconnaissez.",
                    concept: "injection_sql"
                },
                config: {
                    name: "config_backup.py",
                    icon: "üêç",
                    code: `# Script de migration - 15/08/2023
# TODO: Supprimer apr√®s migration ‚ö†Ô∏è

DB_CONFIG = {
    "host": "prod-db.logitrans.local",
    "user": "admin_backup",
    "password": "LogiTrans2023!",  # EN CLAIR!
    "sslmode": "disable"
}`,
                    analysis: "Mot de passe en clair, compte jamais supprim√©, SSL d√©sactiv√©. 3 failles critiques.",
                    concept: "gestion_secrets"
                },
                network: {
                    name: "network_topology.txt",
                    icon: "üåê",
                    diagram: `‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ         R√âSEAU LOGITRANS            ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  FIREWALL ‚Üí PROD ‚Üí BACKUP           ‚îÇ
‚îÇ            ‚Üì        ‚Üì               ‚îÇ
‚îÇ         M√äME VLAN (pas de           ‚îÇ
‚îÇ         segmentation!)              ‚îÇ
‚îÇ                                     ‚îÇ
‚îÇ  ‚ö†Ô∏è Attaquant peut acc√©der aux     ‚îÇ
‚îÇ     sauvegardes depuis PROD         ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò`,
                    analysis: "Aucune segmentation r√©seau. Les sauvegardes sont accessibles depuis les serveurs compromis.",
                    concept: "segmentation_reseau"
                }
            };

            const handleFileSelect = (key) => {
                setSelectedFile(key);
                if (!foundClues.includes(key)) {
                    setFoundClues([...foundClues, key]);
                }
            };

            const handleAnswer = (isCorrect) => {
                setSelectedAnswer(isCorrect ? 'correct' : 'wrong');
                setAnswered(true);
                onAnswer(isCorrect);
            };

            return (
                <div className="container main">
                    <div style={{ marginBottom: '24px' }}>
                        <p style={{ color: 'var(--text-muted)' }}>07:25 ‚Äî Salle serveur</p>
                        <h1 style={{ color: 'var(--accent-blue)' }}>üîç INVESTIGATION</h1>
                        <p style={{ color: 'var(--text-muted)' }}>Utilisez vos comp√©tences techniques pour analyser les preuves et comprendre l'attaque.</p>
                    </div>

                    <div className="card" style={{ borderColor: 'var(--accent-blue)', background: 'rgba(83, 82, 237, 0.05)', marginBottom: '20px' }}>
                        <p style={{ margin: 0 }}>
                            <strong style={{ color: 'var(--accent-blue)' }}>üîé Votre expertise :</strong> Vous savez lire du code et des logs. 
                            Cette comp√©tence fait de vous un enqu√™teur pr√©cieux que peu de personnes dans l'entreprise poss√®dent.
                        </p>
                    </div>

                    <div className="grid-2">
                        <div>
                            <div className="card" style={{ padding: 0 }}>
                                <div style={{ padding: '12px 16px', borderBottom: '1px solid var(--border)', fontWeight: 600 }}>
                                    üìÅ Fichiers √† analyser
                                </div>
                                {Object.entries(files).map(([key, file]) => (
                                    <div 
                                        key={key}
                                        className={`file-item ${selectedFile === key ? 'active' : ''}`}
                                        onClick={() => handleFileSelect(key)}
                                    >
                                        <span>{file.icon}</span>
                                        <span style={{ flex: 1 }}>{file.name}</span>
                                        {foundClues.includes(key) && <span style={{ color: 'var(--accent-green)' }}>‚úì</span>}
                                    </div>
                                ))}
                            </div>
                            
                            <div className="card">
                                <strong>üß© Indices trouv√©s : {foundClues.length}/3</strong>
                                <div style={{ display: 'flex', gap: '8px', marginTop: '12px' }}>
                                    {['logs', 'config', 'network'].map(c => (
                                        <span key={c} style={{
                                            padding: '6px 12px',
                                            borderRadius: '20px',
                                            fontSize: '0.85rem',
                                            background: foundClues.includes(c) ? 'rgba(46, 213, 115, 0.2)' : 'var(--bg-dark)',
                                            border: `1px solid ${foundClues.includes(c) ? 'var(--accent-green)' : 'var(--border)'}`
                                        }}>
                                            {foundClues.includes(c) ? '‚úì' : '?'}
                                        </span>
                                    ))}
                                </div>
                            </div>
                        </div>

                        <div>
                            {selectedFile && (
                                <div className="card fade-in">
                                    <h3 style={{ marginBottom: '16px' }}>
                                        {files[selectedFile].icon} {files[selectedFile].name}
                                    </h3>
                                    
                                    {files[selectedFile].content && (
                                        <Terminal lines={files[selectedFile].content} />
                                    )}
                                    
                                    {files[selectedFile].code && (
                                        <CodeBlock title="Python" code={files[selectedFile].code} />
                                    )}
                                    
                                    {files[selectedFile].diagram && (
                                        <pre style={{
                                            background: 'var(--bg-dark)',
                                            padding: '16px',
                                            borderRadius: '8px',
                                            fontSize: '0.75rem',
                                            fontFamily: "'JetBrains Mono', monospace",
                                            overflow: 'auto'
                                        }}>
                                            {files[selectedFile].diagram}
                                        </pre>
                                    )}
                                    
                                    <Alert type="info" title="üí° Analyse">
                                        {files[selectedFile].analysis}
                                    </Alert>

                                    <div style={{ marginTop: '16px' }}>
                                        <ConceptBadge>Approfondir</ConceptBadge>
                                        <ResourceLink resourceKey={files[selectedFile].concept} compact />
                                    </div>
                                </div>
                            )}
                        </div>
                    </div>

                    {foundClues.length === 3 && !answered && (
                        <div className="card fade-in" style={{ marginTop: '24px' }}>
                            <h3 style={{ marginBottom: '16px' }}>‚ùì Question : Quelle est la cause racine de l'attaque ?</h3>
                            <div style={{ display: 'flex', flexDirection: 'column', gap: '12px' }}>
                                <button className="choice" onClick={() => handleAnswer(false)}>
                                    A. Un virus t√©l√©charg√© par un employ√©
                                </button>
                                <button className="choice" onClick={() => handleAnswer(true)}>
                                    B. Un mot de passe expos√© dans du code source
                                </button>
                                <button className="choice" onClick={() => handleAnswer(false)}>
                                    C. Une attaque DDoS sur le firewall
                                </button>
                            </div>
                        </div>
                    )}

                    {answered && (
                        <div className="fade-in" style={{ marginTop: '24px' }}>
                            <Alert type={selectedAnswer === 'correct' ? 'success' : 'danger'}>
                                {selectedAnswer === 'correct' 
                                    ? "‚úÖ Correct ! Le mot de passe dans config_backup.py a permis l'acc√®s initial."
                                    : "‚ùå Non. L'attaquant a utilis√© les credentials du fichier config_backup.py."
                                }
                            </Alert>
                            <div style={{ textAlign: 'center', marginTop: '20px' }}>
                                <button className="btn btn-primary" onClick={onComplete}>
                                    Continuer ‚Üí
                                </button>
                            </div>
                        </div>
                    )}
                </div>
            );
        };

        // √âcran de d√©cision de crise
        const CrisisScreen = ({ onDecision }) => {
            const [selected, setSelected] = useState(null);

            const decisions = [
                {
                    id: 'pay',
                    icon: 'üí∞',
                    title: 'Payer la ran√ßon',
                    desc: '450 000‚Ç¨ ‚Äî Esp√©rer r√©cup√©rer les donn√©es',
                    result: { type: 'danger', text: '‚ùå Mauvais choix. Seulement 30% r√©cup√®rent leurs donn√©es. Vous financez le crime.' }
                },
                {
                    id: 'rebuild',
                    icon: 'üîß',
                    title: 'Reconstruire',
                    desc: '4 semaines ‚Äî Repartir sur des bases saines',
                    result: { type: 'success', text: '‚úÖ Bonne d√©cision. C\'est la recommandation ANSSI. Nouveau syst√®me 100% s√©curis√©.' }
                },
                {
                    id: 'negotiate',
                    icon: 'ü§ù',
                    title: 'N√©gocier',
                    desc: 'Gagner du temps, r√©duire la ran√ßon',
                    result: { type: 'warning', text: '‚ö†Ô∏è Risqu√©. Pendant la n√©gociation, les attaquants continuent l\'exfiltration.' }
                }
            ];

            return (
                <div className="container main">
                    <div style={{ textAlign: 'center', marginBottom: '24px' }}>
                        <p style={{ color: 'var(--text-muted)' }}>08:30 ‚Äî Cellule de crise</p>
                        <h1 style={{ color: 'var(--accent-amber)' }}>‚ö° D√âCISION CRITIQUE</h1>
                        <p style={{ color: 'var(--text-muted)' }}>Le COMEX attend votre recommandation.</p>
                    </div>

                    <div className="grid-3">
                        {decisions.map(d => (
                            <div 
                                key={d.id}
                                className="choice"
                                onClick={() => setSelected(d)}
                                style={{ textAlign: 'center', padding: '24px' }}
                            >
                                <div style={{ fontSize: '3rem', marginBottom: '12px' }}>{d.icon}</div>
                                <h3>{d.title}</h3>
                                <p style={{ color: 'var(--text-muted)', fontSize: '0.9rem', marginTop: '8px' }}>{d.desc}</p>
                            </div>
                        ))}
                    </div>

                    {selected && (
                        <div className="fade-in" style={{ marginTop: '24px' }}>
                            <Alert type={selected.result.type}>
                                {selected.result.text}
                            </Alert>
                            
                            <div className="card" style={{ background: 'linear-gradient(135deg, rgba(0, 210, 211, 0.1), rgba(168, 85, 247, 0.05))' }}>
                                <ConceptBadge>En savoir plus</ConceptBadge>
                                <p style={{ margin: '12px 0', color: 'var(--text-muted)' }}>
                                    Comment g√©rer une crise cyber ? Quelles sont les bonnes pratiques de l'ANSSI ?
                                </p>
                                <ResourceLink resourceKey="reponse_incident" />
                                <ResourceLink resourceKey="anssi_guide" />
                            </div>

                            <div style={{ textAlign: 'center', marginTop: '20px' }}>
                                <button className="btn btn-primary" onClick={() => onDecision(selected.id)}>
                                    Continuer la mission ‚Üí
                                </button>
                            </div>
                        </div>
                    )}
                </div>
            );
        };

        // √âcran de challenge code
        const CodeChallengeScreen = ({ onComplete, onAnswer }) => {
            const [selected, setSelected] = useState(null);
            const [revealed, setRevealed] = useState(false);

            const options = [
                {
                    id: 'insecure',
                    label: 'üöÄ Rapide (2h)',
                    code: `def login(username, password):
    query = f"SELECT * FROM users WHERE username='{username}' AND password='{password}'"
    return db.execute(query)`,
                    verdict: 'DANGER',
                    issues: ['Injection SQL possible', 'Mot de passe non hash√©']
                },
                {
                    id: 'medium',
                    label: '‚ö° Standard (4h)',
                    code: `def login(username, password):
    query = "SELECT * FROM users WHERE username = %s AND password = %s"
    return db.execute(query, (username, password))`,
                    verdict: 'MOYEN',
                    issues: ['Mot de passe stock√© en clair']
                },
                {
                    id: 'secure',
                    label: 'üõ°Ô∏è S√©curis√© (8h)',
                    code: `from werkzeug.security import check_password_hash

def login(username, password):
    user = User.query.filter_by(username=username).first()
    if user and check_password_hash(user.password_hash, password):
        session['csrf_token'] = secrets.token_hex(32)
        return redirect('/dashboard')
    return render_template('login.html', error='Invalide')`,
                    verdict: 'SECURISE',
                    correct: true,
                    features: ['ORM (anti-injection)', 'Bcrypt (hash)', 'Token CSRF']
                }
            ];

            const handleSelect = (opt) => {
                setSelected(opt);
                setRevealed(true);
                onAnswer(opt.correct || false);
            };

            return (
                <div className="container main">
                    <div style={{ marginBottom: '24px' }}>
                        <p style={{ color: 'var(--text-muted)' }}>09:15 ‚Äî Reconstruction</p>
                        <h1 style={{ color: 'var(--accent-purple)' }}>üíª SECURE CODING</h1>
                        <p style={{ color: 'var(--text-muted)' }}>
                            C'est ici que vos comp√©tences de d√©veloppeur font la diff√©rence. Quelle impl√©mentation choisir ?
                        </p>
                    </div>

                    <div className="card" style={{ borderColor: 'var(--accent-cyan)', background: 'rgba(0, 210, 211, 0.05)', marginBottom: '20px' }}>
                        <p style={{ margin: 0 }}>
                            <strong style={{ color: 'var(--accent-cyan)' }}>üí° Votre impact :</strong> Un code bien s√©curis√© d√®s le d√©part aurait emp√™ch√© cette attaque. 
                            Vous avez le pouvoir de prot√©ger l'entreprise et ses 850 employ√©s.
                        </p>
                    </div>

                    {options.map(opt => (
                        <div 
                            key={opt.id}
                            className="card"
                            onClick={() => !revealed && handleSelect(opt)}
                            style={{ 
                                cursor: revealed ? 'default' : 'pointer',
                                borderColor: revealed 
                                    ? (opt.correct ? 'var(--accent-green)' : selected?.id === opt.id ? 'var(--accent-red)' : 'var(--border)')
                                    : 'var(--border)',
                                marginBottom: '16px'
                            }}
                        >
                            <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '12px' }}>
                                <strong>{opt.label}</strong>
                                {revealed && (
                                    <span style={{ 
                                        color: opt.verdict === 'SECURISE' ? 'var(--accent-green)' : opt.verdict === 'MOYEN' ? 'var(--accent-amber)' : 'var(--accent-red)',
                                        fontWeight: 600
                                    }}>
                                        {opt.verdict === 'SECURISE' ? '‚úÖ' : opt.verdict === 'MOYEN' ? '‚ö†Ô∏è' : '‚ùå'} {opt.verdict}
                                    </span>
                                )}
                            </div>
                            <CodeBlock title="Python" code={opt.code} />
                            
                            {revealed && (
                                <div style={{ marginTop: '12px', padding: '12px', background: 'var(--bg-dark)', borderRadius: '8px' }}>
                                    {opt.issues && (
                                        <div style={{ color: 'var(--accent-red)' }}>
                                            <strong>Probl√®mes :</strong> {opt.issues.join(', ')}
                                        </div>
                                    )}
                                    {opt.features && (
                                        <div style={{ color: 'var(--accent-green)' }}>
                                            <strong>Protections :</strong> {opt.features.join(', ')}
                                        </div>
                                    )}
                                </div>
                            )}
                        </div>
                    ))}

                    {revealed && (
                        <div className="fade-in">
                            <div className="card" style={{ background: 'linear-gradient(135deg, rgba(0, 210, 211, 0.1), rgba(168, 85, 247, 0.05))' }}>
                                <ConceptBadge>Approfondir</ConceptBadge>
                                <p style={{ margin: '12px 0', color: 'var(--text-muted)' }}>
                                    Comprenez en d√©tail les vuln√©rabilit√©s et les bonnes pratiques.
                                </p>
                                <div className="grid-2">
                                    <ResourceLink resourceKey="injection_sql" compact />
                                    <ResourceLink resourceKey="hash_passwords" compact />
                                </div>
                            </div>

                            <div style={{ textAlign: 'center', marginTop: '20px' }}>
                                <button className="btn btn-primary" onClick={onComplete}>
                                    Mission suivante ‚Üí
                                </button>
                            </div>
                        </div>
                    )}
                </div>
            );
        };

        // √âcran Pipeline DevSecOps
        const PipelineScreen = ({ onComplete, onAnswer }) => {
            const [selected, setSelected] = useState(['lint', 'tests', 'deploy']);
            const [validated, setValidated] = useState(false);

            const stages = [
                { id: 'lint', name: 'üìù Lint', desc: 'Style de code', security: false },
                { id: 'sast', name: 'üõ°Ô∏è SAST', desc: 'Analyse statique s√©curit√©', security: true, required: true },
                { id: 'tests', name: '‚úÖ Tests', desc: 'Tests unitaires', security: false },
                { id: 'deps', name: 'üì¶ D√©pendances', desc: 'Scan vuln√©rabilit√©s (Snyk)', security: true, required: true },
                { id: 'secrets', name: 'üîë Secrets', desc: 'D√©tection credentials', security: true, required: true },
                { id: 'dast', name: 'üåê DAST', desc: 'Tests dynamiques (ZAP)', security: true },
                { id: 'deploy', name: 'üöÄ D√©ploiement', desc: 'Mise en production', security: false }
            ];

            const toggle = (id) => {
                if (validated) return;
                setSelected(prev => prev.includes(id) ? prev.filter(s => s !== id) : [...prev, id]);
            };

            const validate = () => {
                const required = stages.filter(s => s.required).map(s => s.id);
                const hasAll = required.every(r => selected.includes(r));
                setValidated(true);
                onAnswer(hasAll);
            };

            const isCorrect = stages.filter(s => s.required).every(s => selected.includes(s.id));

            return (
                <div className="container main">
                    <div style={{ marginBottom: '24px' }}>
                        <p style={{ color: 'var(--text-muted)' }}>10:00 ‚Äî Infrastructure</p>
                        <h1 style={{ color: 'var(--accent-cyan)' }}>‚öôÔ∏è PIPELINE DEVSECOPS</h1>
                        <p style={{ color: 'var(--text-muted)' }}>Construisez le pipeline qui prot√©gera l'entreprise √† chaque d√©ploiement.</p>
                    </div>

                    <div className="card" style={{ borderColor: 'var(--accent-green)', background: 'rgba(46, 213, 115, 0.05)', marginBottom: '20px' }}>
                        <p style={{ margin: 0 }}>
                            <strong style={{ color: 'var(--accent-green)' }}>üöÄ Votre cr√©ation :</strong> Ce pipeline sera votre h√©ritage. 
                            Chaque commit sera automatiquement v√©rifi√©, prot√©geant l'√©quipe m√™me quand vous ne serez pas l√†.
                        </p>
                    </div>

                    <div className="card">
                        <div style={{ display: 'flex', flexWrap: 'wrap', gap: '12px' }}>
                            {stages.map(s => (
                                <div
                                    key={s.id}
                                    onClick={() => toggle(s.id)}
                                    style={{
                                        padding: '14px 20px',
                                        borderRadius: '8px',
                                        cursor: validated ? 'default' : 'pointer',
                                        background: selected.includes(s.id) 
                                            ? (s.security ? 'rgba(46, 213, 115, 0.2)' : 'rgba(83, 82, 237, 0.2)')
                                            : 'var(--bg-dark)',
                                        border: `2px solid ${
                                            validated && s.required && !selected.includes(s.id)
                                                ? 'var(--accent-red)'
                                                : selected.includes(s.id) 
                                                    ? (s.security ? 'var(--accent-green)' : 'var(--accent-blue)')
                                                    : 'var(--border)'
                                        }`,
                                        transition: 'all 0.2s'
                                    }}
                                >
                                    <div style={{ fontWeight: 600 }}>{s.name}</div>
                                    <div style={{ fontSize: '0.8rem', color: 'var(--text-muted)' }}>{s.desc}</div>
                                    {s.required && <span style={{ fontSize: '0.7rem', color: 'var(--accent-amber)' }}>OBLIGATOIRE</span>}
                                </div>
                            ))}
                        </div>
                    </div>

                    {!validated && (
                        <div style={{ textAlign: 'center', marginTop: '20px' }}>
                            <button className="btn btn-primary" onClick={validate}>
                                ‚úì Valider le pipeline
                            </button>
                        </div>
                    )}

                    {validated && (
                        <div className="fade-in">
                            <Alert type={isCorrect ? 'success' : 'danger'}>
                                {isCorrect 
                                    ? "‚úÖ Excellent ! Votre pipeline inclut toutes les √©tapes de s√©curit√© obligatoires."
                                    : "‚ùå Il manque des √©tapes essentielles : SAST, scan de d√©pendances et d√©tection de secrets sont obligatoires."
                                }
                            </Alert>

                            <div className="card" style={{ background: 'linear-gradient(135deg, rgba(0, 210, 211, 0.1), rgba(168, 85, 247, 0.05))' }}>
                                <ConceptBadge>Approfondir</ConceptBadge>
                                <p style={{ margin: '12px 0', color: 'var(--text-muted)' }}>
                                    D√©couvrez comment int√©grer la s√©curit√© dans votre pipeline CI/CD.
                                </p>
                                <ResourceLink resourceKey="devsecops" />
                            </div>

                            <div style={{ textAlign: 'center', marginTop: '20px' }}>
                                <button className="btn btn-success" onClick={onComplete}>
                                    Voir le bilan ‚Üí
                                </button>
                            </div>
                        </div>
                    )}
                </div>
            );
        };

        // √âcran final
        const FinalScreen = ({ score, playerName }) => {
            const percentage = Math.round((score.correct / score.total) * 100);

            return (
                <div className="container main">
                    <div style={{ textAlign: 'center', marginBottom: '30px' }}>
                        <div style={{ fontSize: '5rem', marginBottom: '16px' }}>üéì</div>
                        <h1>Mission accomplie, {playerName} !</h1>
                        <p style={{ color: 'var(--text-muted)', fontSize: '1.2rem' }}>
                            Score : {score.correct}/{score.total} ({percentage}%)
                        </p>
                    </div>

                    <div className="grid-2" style={{ marginBottom: '24px' }}>
                        <div className="card" style={{ borderColor: 'var(--accent-red)' }}>
                            <h3 style={{ color: 'var(--accent-red)', marginBottom: '12px' }}>‚ùå AVANT</h3>
                            <ul style={{ listStyle: 'none', display: 'flex', flexDirection: 'column', gap: '8px', color: 'var(--text-muted)' }}>
                                <li>‚Ä¢ Secrets dans le code</li>
                                <li>‚Ä¢ Pas de segmentation r√©seau</li>
                                <li>‚Ä¢ Aucune analyse de s√©curit√©</li>
                                <li>‚Ä¢ Sauvegardes accessibles</li>
                            </ul>
                        </div>
                        <div className="card" style={{ borderColor: 'var(--accent-green)' }}>
                            <h3 style={{ color: 'var(--accent-green)', marginBottom: '12px' }}>‚úÖ APR√àS</h3>
                            <ul style={{ listStyle: 'none', display: 'flex', flexDirection: 'column', gap: '8px', color: 'var(--text-muted)' }}>
                                <li>‚Ä¢ Vault pour les secrets</li>
                                <li>‚Ä¢ Pipeline DevSecOps</li>
                                <li>‚Ä¢ Zero Trust Network</li>
                                <li>‚Ä¢ Sauvegardes 3-2-1-1</li>
                            </ul>
                        </div>
                    </div>

                    <div className="card" style={{ background: 'linear-gradient(135deg, #1e3a5f, #312e81)', textAlign: 'center' }}>
                        <div className="grid-2" style={{ marginBottom: '16px' }}>
                            <div>
                                <div style={{ fontSize: '2rem', fontWeight: 700, color: 'var(--accent-red)' }}>2,3 M‚Ç¨</div>
                                <div style={{ color: 'var(--text-muted)' }}>Co√ªt de l'attaque</div>
                            </div>
                            <div>
                                <div style={{ fontSize: '2rem', fontWeight: 700, color: 'var(--accent-green)' }}>180 K‚Ç¨/an</div>
                                <div style={{ color: 'var(--text-muted)' }}>Budget s√©curit√©</div>
                            </div>
                        </div>
                        <p style={{ color: 'var(--accent-amber)' }}>
                            üí° La s√©curit√© co√ªte 8% du co√ªt d'une attaque ‚Äî C'est rentable !
                        </p>
                    </div>

                    <div className="card" style={{ borderColor: 'var(--accent-green)', background: 'rgba(46, 213, 115, 0.05)' }}>
                        <h3 style={{ marginBottom: '16px', color: 'var(--accent-green)' }}>üí™ Le d√©veloppeur : h√©ros de la cybers√©curit√©</h3>
                        <p style={{ color: 'var(--text-muted)', marginBottom: '16px' }}>
                            Cette mission vous a montr√© que le d√©veloppeur n'est pas le maillon faible, mais <strong>la premi√®re ligne de d√©fense</strong>. Vos comp√©tences permettent de :
                        </p>
                        <div className="grid-2" style={{ marginBottom: '16px' }}>
                            <div style={{ padding: '12px', background: 'var(--bg-dark)', borderRadius: '8px' }}>
                                <strong style={{ color: 'var(--accent-blue)' }}>üõ°Ô∏è Pr√©venir</strong>
                                <p style={{ fontSize: '0.85rem', color: 'var(--text-muted)', marginTop: '4px' }}>Code s√©curis√©, gestion des secrets, validation des entr√©es</p>
                            </div>
                            <div style={{ padding: '12px', background: 'var(--bg-dark)', borderRadius: '8px' }}>
                                <strong style={{ color: 'var(--accent-purple)' }}>üîç D√©tecter</strong>
                                <p style={{ fontSize: '0.85rem', color: 'var(--text-muted)', marginTop: '4px' }}>Pipeline DevSecOps, analyse des logs, monitoring</p>
                            </div>
                            <div style={{ padding: '12px', background: 'var(--bg-dark)', borderRadius: '8px' }}>
                                <strong style={{ color: 'var(--accent-amber)' }}>‚ö° R√©agir</strong>
                                <p style={{ fontSize: '0.85rem', color: 'var(--text-muted)', marginTop: '4px' }}>Investigation technique, identification des failles</p>
                            </div>
                            <div style={{ padding: '12px', background: 'var(--bg-dark)', borderRadius: '8px' }}>
                                <strong style={{ color: 'var(--accent-green)' }}>üîß Reconstruire</strong>
                                <p style={{ fontSize: '0.85rem', color: 'var(--text-muted)', marginTop: '4px' }}>Architecture s√©curis√©e, bonnes pratiques, r√©silience</p>
                            </div>
                        </div>
                        <p style={{ fontStyle: 'italic', textAlign: 'center', color: 'var(--accent-green)' }}>
                            "Chaque ligne de code s√©curis√©e est un rempart contre les attaques."
                        </p>
                    </div>

                    <div className="card">
                        <h3 style={{ marginBottom: '16px' }}>üìö Ressources pour aller plus loin</h3>
                        <div className="grid-2">
                            <ResourceLink resourceKey="anssi_guide" compact />
                            <ResourceLink resourceKey="owasp_top10" compact />
                        </div>
                        <div style={{ marginTop: '12px' }}>
                            <a 
                                href={DRIVE_BASE_URL}
                                target="_blank"
                                rel="noopener noreferrer"
                                className="resource-link"
                                style={{ background: 'var(--bg-dark)' }}
                            >
                                <span className="icon">üìÅ</span>
                                <span className="label">
                                    <strong>Dossier complet des ressources</strong>
                                    <div style={{ fontSize: '0.85rem', opacity: 0.8 }}>Toutes les fiches concepts sur Google Drive</div>
                                </span>
                                <span className="arrow">‚Üí</span>
                            </a>
                        </div>
                    </div>

                    <div className="card" style={{ textAlign: 'center' }}>
                        <h3>üöÄ Opportunit√©s Carri√®re</h3>
                        <div className="grid-3" style={{ margin: '20px 0' }}>
                            <div>
                                <div style={{ fontSize: '2rem', fontWeight: 700 }}>15 000</div>
                                <div style={{ color: 'var(--text-muted)', fontSize: '0.85rem' }}>postes non pourvus</div>
                            </div>
                            <div>
                                <div style={{ fontSize: '2rem', fontWeight: 700 }}>+25%</div>
                                <div style={{ color: 'var(--text-muted)', fontSize: '0.85rem' }}>salaire vs dev</div>
                            </div>
                            <div>
                                <div style={{ fontSize: '2rem', fontWeight: 700 }}>0%</div>
                                <div style={{ color: 'var(--text-muted)', fontSize: '0.85rem' }}>ch√¥mage</div>
                            </div>
                        </div>
                        <p style={{ fontStyle: 'italic', color: 'var(--text-muted)' }}>
                            "Ce n'est pas SI vous serez attaqu√©. C'est QUAND."
                        </p>
                    </div>
                </div>
            );
        };

        // ==================== APPLICATION PRINCIPALE ====================

        const App = () => {
            const [gameState, setGameState] = useState('start');
            const [playerName, setPlayerName] = useState('');
            const [score, setScore] = useState({ correct: 0, total: 0 });
            const [phase, setPhase] = useState(1);

            const handleAnswer = (correct) => {
                setScore(prev => ({
                    correct: prev.correct + (correct ? 1 : 0),
                    total: prev.total + 1
                }));
            };

            const screens = {
                start: <StartScreen onStart={() => { setGameState('alert'); setPhase(1); }} playerName={playerName} setPlayerName={setPlayerName} />,
                alert: <AlertScreen onNext={() => { setGameState('investigation'); setPhase(2); }} playerName={playerName} />,
                investigation: <InvestigationScreen onComplete={() => { setGameState('crisis'); setPhase(3); }} onAnswer={handleAnswer} />,
                crisis: <CrisisScreen onDecision={() => { setGameState('code'); setPhase(4); }} />,
                code: <CodeChallengeScreen onComplete={() => { setGameState('pipeline'); setPhase(5); }} onAnswer={handleAnswer} />,
                pipeline: <PipelineScreen onComplete={() => { setGameState('final'); setPhase(7); }} onAnswer={handleAnswer} />,
                final: <FinalScreen score={score} playerName={playerName} />
            };

            return (
                <div>
                    {gameState !== 'start' && <StatusBar playerName={playerName} phase={phase} score={score} />}
                    {screens[gameState]}
                </div>
            );
        };

        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>
</html>
